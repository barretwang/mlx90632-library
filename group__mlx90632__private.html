<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>MLX90632 Driver Library: MLX90632 Internal library functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="melexis-logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MLX90632 Driver Library
   &#160;<span id="projectnumber">a624b6d0</span>
   </div>
   <div id="projectbrief">Universal MCU library for the 90632</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__mlx90632__private.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">MLX90632 Internal library functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gad92d7ee2b0b600bb83c7c4caf2e6d65c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#gad92d7ee2b0b600bb83c7c4caf2e6d65c">POW10</a>&#160;&#160;&#160;10000000000LL</td></tr>
<tr class="separator:gad92d7ee2b0b600bb83c7c4caf2e6d65c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c6d5de492ac61ad29aec7aa9a436bbf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga1c6d5de492ac61ad29aec7aa9a436bbf">VERSION</a>&#160;&#160;&#160;&quot;test&quot;</td></tr>
<tr class="separator:ga1c6d5de492ac61ad29aec7aa9a436bbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga10b2d890d871e1489bb02b7e70d9bdfb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a>&#160;&#160;&#160;static</td></tr>
<tr class="separator:ga10b2d890d871e1489bb02b7e70d9bdfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga1c6a7153997c482936180a22a3252d5c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__mlx90632__private.html#ga10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a> (void)</td></tr>
<tr class="memdesc:ga1c6a7153997c482936180a22a3252d5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger start measurement for mlx90632.  <a href="#ga1c6a7153997c482936180a22a3252d5c">More...</a><br/></td></tr>
<tr class="separator:ga1c6a7153997c482936180a22a3252d5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga392d63bee1a87de09141a37ac73aad6a"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga392d63bee1a87de09141a37ac73aad6a">mlx90632_channel_new_select</a> (int32_t ret, uint8_t *channel_new, uint8_t *channel_old)</td></tr>
<tr class="memdesc:ga392d63bee1a87de09141a37ac73aad6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Based on <a class="el" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a> return value fill channel_new and channel_old variables with proper values.  <a href="#ga392d63bee1a87de09141a37ac73aad6a">More...</a><br/></td></tr>
<tr class="separator:ga392d63bee1a87de09141a37ac73aad6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0d807560e3efcd83e1a12b569a6876b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__mlx90632__private.html#ga10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga0d807560e3efcd83e1a12b569a6876b0">mlx90632_read_temp_ambient_raw</a> (int16_t *ambient_new_raw, int16_t *ambient_old_raw)</td></tr>
<tr class="memdesc:ga0d807560e3efcd83e1a12b569a6876b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read ambient raw old and new values based on <a class="el" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a> return value.  <a href="#ga0d807560e3efcd83e1a12b569a6876b0">More...</a><br/></td></tr>
<tr class="separator:ga0d807560e3efcd83e1a12b569a6876b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d1dd4ea2aae3fe570e783fb04296590"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__mlx90632__private.html#ga10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga1d1dd4ea2aae3fe570e783fb04296590">mlx90632_read_temp_object_raw</a> (int32_t start_measurement_ret, int16_t *object_new_raw, int16_t *object_old_raw)</td></tr>
<tr class="memdesc:ga1d1dd4ea2aae3fe570e783fb04296590"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read object raw old and new values based on <a class="el" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a> return value.  <a href="#ga1d1dd4ea2aae3fe570e783fb04296590">More...</a><br/></td></tr>
<tr class="separator:ga1d1dd4ea2aae3fe570e783fb04296590"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga36c61b9d5417e77e415500ab45055053"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga36c61b9d5417e77e415500ab45055053">mlx90632_read_temp_raw</a> (int16_t *ambient_new_raw, int16_t *ambient_old_raw, int16_t *object_new_raw, int16_t *object_old_raw)</td></tr>
<tr class="memdesc:ga36c61b9d5417e77e415500ab45055053"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read raw ambient and object temperature.  <a href="#ga36c61b9d5417e77e415500ab45055053">More...</a><br/></td></tr>
<tr class="separator:ga36c61b9d5417e77e415500ab45055053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06bcec82dba1e3d947dbca8203ca7e43"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga06bcec82dba1e3d947dbca8203ca7e43">mlx90632_preprocess_temp_ambient</a> (int16_t ambient_new_raw, int16_t ambient_old_raw, int16_t Gb)</td></tr>
<tr class="memdesc:ga06bcec82dba1e3d947dbca8203ca7e43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculation of raw ambient output.  <a href="#ga06bcec82dba1e3d947dbca8203ca7e43">More...</a><br/></td></tr>
<tr class="separator:ga06bcec82dba1e3d947dbca8203ca7e43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca7c5dd5a81d4e98de37195023bec370"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#gaca7c5dd5a81d4e98de37195023bec370">mlx90632_preprocess_temp_object</a> (int16_t object_new_raw, int16_t object_old_raw, int16_t ambient_new_raw, int16_t ambient_old_raw, int16_t Ka)</td></tr>
<tr class="memdesc:gaca7c5dd5a81d4e98de37195023bec370"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculation of raw object output.  <a href="#gaca7c5dd5a81d4e98de37195023bec370">More...</a><br/></td></tr>
<tr class="separator:gaca7c5dd5a81d4e98de37195023bec370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7939b85a05b6d8899c0d793b37388a0d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga7939b85a05b6d8899c0d793b37388a0d">mlx90632_calc_temp_ambient</a> (int16_t ambient_new_raw, int16_t ambient_old_raw, int32_t P_T, int32_t P_R, int32_t P_G, int32_t P_O, int16_t Gb)</td></tr>
<tr class="memdesc:ga7939b85a05b6d8899c0d793b37388a0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculation of ambient temperature.  <a href="#ga7939b85a05b6d8899c0d793b37388a0d">More...</a><br/></td></tr>
<tr class="separator:ga7939b85a05b6d8899c0d793b37388a0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga737d859adc42fdd68c2db1aac727ceb7"><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga737d859adc42fdd68c2db1aac727ceb7">mlx90632_calc_temp_object_iteration</a> (double prev_object_temp, int32_t object, double TAdut, int32_t Ga, int32_t Fa, int32_t Fb, int16_t Ha, int16_t Hb, double <a class="el" href="group__mlx90632__private.html#ga550830179421e5b049ab66072426fa4f">emissivity</a>)</td></tr>
<tr class="memdesc:ga737d859adc42fdd68c2db1aac727ceb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterative calculation of object temperature.  <a href="#ga737d859adc42fdd68c2db1aac727ceb7">More...</a><br/></td></tr>
<tr class="separator:ga737d859adc42fdd68c2db1aac727ceb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6990b56cba8dd4e6f9508ae075b30be0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga6990b56cba8dd4e6f9508ae075b30be0">mlx90632_set_emissivity</a> (double value)</td></tr>
<tr class="memdesc:ga6990b56cba8dd4e6f9508ae075b30be0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set emissivity which is retained in single variable.  <a href="#ga6990b56cba8dd4e6f9508ae075b30be0">More...</a><br/></td></tr>
<tr class="separator:ga6990b56cba8dd4e6f9508ae075b30be0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaefd8592cf3141fc3c743518f5c17922b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#gaefd8592cf3141fc3c743518f5c17922b">mlx90632_get_emissivity</a> (void)</td></tr>
<tr class="memdesc:gaefd8592cf3141fc3c743518f5c17922b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read value of emissivity.  <a href="#gaefd8592cf3141fc3c743518f5c17922b">More...</a><br/></td></tr>
<tr class="separator:gaefd8592cf3141fc3c743518f5c17922b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadaa9b8a1b74083aeee178f313fbad260"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#gadaa9b8a1b74083aeee178f313fbad260">mlx90632_calc_temp_object</a> (int32_t object, int32_t ambient, int32_t Ea, int32_t Eb, int32_t Ga, int32_t Fa, int32_t Fb, int16_t Ha, int16_t Hb)</td></tr>
<tr class="memdesc:gadaa9b8a1b74083aeee178f313fbad260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculation of object temperature.  <a href="#gadaa9b8a1b74083aeee178f313fbad260">More...</a><br/></td></tr>
<tr class="separator:gadaa9b8a1b74083aeee178f313fbad260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4959a8751a1c201cbb2b6bcf6ee07df8"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga4959a8751a1c201cbb2b6bcf6ee07df8">mlx90632_init</a> (void)</td></tr>
<tr class="memdesc:ga4959a8751a1c201cbb2b6bcf6ee07df8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize MLX90632 driver and confirm EEPROM version.  <a href="#ga4959a8751a1c201cbb2b6bcf6ee07df8">More...</a><br/></td></tr>
<tr class="separator:ga4959a8751a1c201cbb2b6bcf6ee07df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga4c40d3f9fa0642ccff11f4699f243180"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga4c40d3f9fa0642ccff11f4699f243180">mlx90632version</a> [] = { <a class="el" href="group__mlx90632__private.html#ga1c6d5de492ac61ad29aec7aa9a436bbf">VERSION</a> }</td></tr>
<tr class="separator:ga4c40d3f9fa0642ccff11f4699f243180"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga550830179421e5b049ab66072426fa4f"><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mlx90632__private.html#ga550830179421e5b049ab66072426fa4f">emissivity</a> = 0.0</td></tr>
<tr class="separator:ga550830179421e5b049ab66072426fa4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gad92d7ee2b0b600bb83c7c4caf2e6d65c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POW10&#160;&#160;&#160;10000000000LL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00035">35</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga10b2d890d871e1489bb02b7e70d9bdfb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STATIC&#160;&#160;&#160;static</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00044">44</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga1c6d5de492ac61ad29aec7aa9a436bbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VERSION&#160;&#160;&#160;&quot;test&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00038">38</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga7939b85a05b6d8899c0d793b37388a0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double mlx90632_calc_temp_ambient </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>ambient_new_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>ambient_old_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>P_T</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>P_R</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>P_G</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>P_O</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>Gb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculation of ambient temperature. </p>
<p>DSPv5 implementation of ambient temperature calculation</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ambient_new_raw</td><td>ambient temperature from <a class="el" href="group__mlx90632___a_p_i.html#ga8c4bf643c0a7d5b4318a01c391e58a44">MLX90632_RAM_3</a>. The channel 1 or 2 is determined by value in <a class="el" href="group__mlx90632___a_p_i.html#ga0a7a304c4dfb097c4e5dfd410916abc3">MLX90632_STAT_CYCLE_POS</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ambient_old_raw</td><td>ambient temperature from <a class="el" href="group__mlx90632___a_p_i.html#ga8c4bf643c0a7d5b4318a01c391e58a44">MLX90632_RAM_3</a>. The channel 1 or 2 is determined by value not in <a class="el" href="group__mlx90632___a_p_i.html#ga0a7a304c4dfb097c4e5dfd410916abc3">MLX90632_STAT_CYCLE_POS</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">P_T</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#gad50f196adba2440c053bc3a8c2a0ab9f">MLX90632_EE_P_T</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">P_R</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#gab4b5b68a32398184db31634ae558540e">MLX90632_EE_P_R</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">P_G</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#ga203e75a8e8aedae4776daa147ff6acba">MLX90632_EE_P_G</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">P_O</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#ga769ea3b88a0381c4d219c8f4823d6dce">MLX90632_EE_P_O</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Gb</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#ga3fb045ecd6369440678041a640220336">MLX90632_EE_Gb</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Calculated ambient temperature degrees Celsius </dd></dl>

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00251">251</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;{</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordtype">double</span> Asub, Bsub, Ablock, Bblock, Cblock, AMB;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    AMB = <a class="code" href="group__mlx90632__private.html#ga06bcec82dba1e3d947dbca8203ca7e43">mlx90632_preprocess_temp_ambient</a>(ambient_new_raw, ambient_old_raw, Gb);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    Asub = ((double)P_T) / (double)17592186044416.0;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    Bsub = (double)AMB - ((<span class="keywordtype">double</span>)P_R / (double)256.0);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    Ablock = Asub * (Bsub * Bsub);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    Bblock = (Bsub / (double)P_G) * (double)1048576.0;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    Cblock = (double)P_O / (<span class="keywordtype">double</span>)256.0;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">return</span> Bblock + Ablock + Cblock;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="ttc" id="group__mlx90632__private_html_ga06bcec82dba1e3d947dbca8203ca7e43"><div class="ttname"><a href="group__mlx90632__private.html#ga06bcec82dba1e3d947dbca8203ca7e43">mlx90632_preprocess_temp_ambient</a></div><div class="ttdeci">double mlx90632_preprocess_temp_ambient(int16_t ambient_new_raw, int16_t ambient_old_raw, int16_t Gb)</div><div class="ttdoc">Calculation of raw ambient output. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8c_source.html#l00229">mlx90632.c:229</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gadaa9b8a1b74083aeee178f313fbad260"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double mlx90632_calc_temp_object </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>ambient</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>Ea</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>Eb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>Ga</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>Fa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>Fb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>Ha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>Hb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculation of object temperature. </p>
<p>DSPv5 implementation of object temperature calculation with customer calibration data</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">object</td><td>object temperature from <a class="el" href="group__mlx90632___a_p_i.html#gaca7c5dd5a81d4e98de37195023bec370">mlx90632_preprocess_temp_object</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ambient</td><td>ambient temperature from <a class="el" href="group__mlx90632___a_p_i.html#ga06bcec82dba1e3d947dbca8203ca7e43">mlx90632_preprocess_temp_ambient</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Ea</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#ga4399bd769986c4e50448e470d33faacb">MLX90632_EE_Ea</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Eb</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#gae2c1d4b53f308ceeba61097f29d5b4d7">MLX90632_EE_Eb</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Ga</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#gab2ec1c70573c1411fe3dcd0b43ac2eb9">MLX90632_EE_Ga</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Fb</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#ga276673fcf38453786ce26bfa29d471c0">MLX90632_EE_Fb</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Fa</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#gae7e90f34f173ef2590367d76b5e77005">MLX90632_EE_Fa</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Ha</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#ga2d03ba5187e90272e400bbc53596ae96">MLX90632_EE_Ha</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Hb</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#ga759b2d5623bc0a1ba3baefe2d2d430e1">MLX90632_EE_Hb</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>emissivity Value provided by user of the object emissivity using <a class="el" href="group__mlx90632___a_p_i.html#ga6990b56cba8dd4e6f9508ae075b30be0">mlx90632_set_emissivity</a> function.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Calculated object temperature in milliCelsius </dd></dl>

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00330">330</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordtype">double</span> kEa, kEb, TAdut;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordtype">double</span> temp = 25.0;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordtype">double</span> tmp_emi = <a class="code" href="group__mlx90632__private.html#gaefd8592cf3141fc3c743518f5c17922b">mlx90632_get_emissivity</a>();</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    int8_t i;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    kEa = ((double)Ea) / ((double)65536.0);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    kEb = ((double)Eb) / ((double)256.0);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    TAdut = (((double)ambient) - kEb) / kEa + 25;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">//iterate through calculations</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 5; ++i)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        temp = <a class="code" href="group__mlx90632__private.html#ga737d859adc42fdd68c2db1aac727ceb7">mlx90632_calc_temp_object_iteration</a>(temp, <span class="keywordtype">object</span>, TAdut, Ga, Fa, Fb, Ha, Hb, tmp_emi);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">return</span> temp;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div>
<div class="ttc" id="group__mlx90632__private_html_ga737d859adc42fdd68c2db1aac727ceb7"><div class="ttname"><a href="group__mlx90632__private.html#ga737d859adc42fdd68c2db1aac727ceb7">mlx90632_calc_temp_object_iteration</a></div><div class="ttdeci">static double mlx90632_calc_temp_object_iteration(double prev_object_temp, int32_t object, double TAdut, int32_t Ga, int32_t Fa, int32_t Fb, int16_t Ha, int16_t Hb, double emissivity)</div><div class="ttdoc">Iterative calculation of object temperature. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8c_source.html#l00287">mlx90632.c:287</a></div></div>
<div class="ttc" id="group__mlx90632__private_html_gaefd8592cf3141fc3c743518f5c17922b"><div class="ttname"><a href="group__mlx90632__private.html#gaefd8592cf3141fc3c743518f5c17922b">mlx90632_get_emissivity</a></div><div class="ttdeci">double mlx90632_get_emissivity(void)</div><div class="ttdoc">Read value of emissivity. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8c_source.html#l00318">mlx90632.c:318</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga737d859adc42fdd68c2db1aac727ceb7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static double mlx90632_calc_temp_object_iteration </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>prev_object_temp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>TAdut</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>Ga</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>Fa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>Fb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>Ha</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>Hb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>emissivity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Iterative calculation of object temperature. </p>
<p>DSPv5 requires 3 iterations to reduce noise for object temperature. Since each iteration requires same calculations this helper function is implemented.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">prev_object_temp</td><td>previously calculated object temperature. If there is no previously calculated temperature input 25.0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">object</td><td>object temperature from <a class="el" href="group__mlx90632___a_p_i.html#gaca7c5dd5a81d4e98de37195023bec370">mlx90632_preprocess_temp_object</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">TAdut</td><td>ambient temperature coefficient </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Ga</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#gab2ec1c70573c1411fe3dcd0b43ac2eb9">MLX90632_EE_Ga</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Fa</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#gae7e90f34f173ef2590367d76b5e77005">MLX90632_EE_Fa</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Fb</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#ga276673fcf38453786ce26bfa29d471c0">MLX90632_EE_Fb</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Ha</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#ga2d03ba5187e90272e400bbc53596ae96">MLX90632_EE_Ha</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Hb</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#ga759b2d5623bc0a1ba3baefe2d2d430e1">MLX90632_EE_Hb</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">emissivity</td><td>Value provided by user of the object emissivity</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Calculated object temperature for current iteration in milliCelsius </dd></dl>

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00287">287</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;{</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordtype">double</span> calcedGa, calcedGb, calcedFa, TAdut4, first_sqrt;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// temp variables</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordtype">double</span> KsTAtmp, Alpha_corr;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordtype">double</span> Ha_customer, Hb_customer;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    Ha_customer = Ha / ((double)16384.0);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    Hb_customer = Hb / ((double)1024.0);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    calcedGa = ((double)Ga * (prev_object_temp - 25)) / ((<span class="keywordtype">double</span>)68719476736.0);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    KsTAtmp = (double)Fb * (TAdut - 25);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    calcedGb = KsTAtmp / ((double)68719476736.0);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    Alpha_corr = (((double)(Fa * <a class="code" href="group__mlx90632__private.html#gad92d7ee2b0b600bb83c7c4caf2e6d65c">POW10</a>)) * Ha_customer * (<span class="keywordtype">double</span>)(1 + calcedGa + calcedGb)) /</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                 ((double)70368744177664.0);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    calcedFa = <span class="keywordtype">object</span> / (<a class="code" href="group__mlx90632__private.html#ga550830179421e5b049ab66072426fa4f">emissivity</a> * (Alpha_corr / <a class="code" href="group__mlx90632__private.html#gad92d7ee2b0b600bb83c7c4caf2e6d65c">POW10</a>));</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    TAdut4 = (TAdut + 273.15) * (TAdut + 273.15) * (TAdut + 273.15) * (TAdut + 273.15);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    first_sqrt = sqrt(calcedFa + TAdut4);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">return</span> sqrt(first_sqrt) - 273.15 - Hb_customer;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div>
<div class="ttc" id="group__mlx90632__private_html_gad92d7ee2b0b600bb83c7c4caf2e6d65c"><div class="ttname"><a href="group__mlx90632__private.html#gad92d7ee2b0b600bb83c7c4caf2e6d65c">POW10</a></div><div class="ttdeci">#define POW10</div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8c_source.html#l00035">mlx90632.c:35</a></div></div>
<div class="ttc" id="group__mlx90632__private_html_ga550830179421e5b049ab66072426fa4f"><div class="ttname"><a href="group__mlx90632__private.html#ga550830179421e5b049ab66072426fa4f">emissivity</a></div><div class="ttdeci">static double emissivity</div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8c_source.html#l00312">mlx90632.c:312</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga392d63bee1a87de09141a37ac73aad6a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t mlx90632_channel_new_select </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>channel_new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>channel_old</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Based on <a class="el" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a> return value fill channel_new and channel_old variables with proper values. </p>
<p>This is to provide a bit more flexibility in case other channels are returned and need a bit more mingeling than usual maths can provide.</p>
<p>So far there are just two use cases. If returned value is not 1 or 2, it will leave channel_new and channel_old unassigned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ret</td><td><a class="el" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a> return value </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*channel_new</td><td>Pointer to memory location where new channel value is stored </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*channel_old</td><td>Pointer to memory location where old channel value is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>When both memory locations are updated as per ret </td></tr>
    <tr><td class="paramname">-EINVAL</td><td>channel_new and channel_old were not updated </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00106">106</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">switch</span> (ret)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            *channel_new = 1;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            *channel_old = 2;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            *channel_new = 2;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            *channel_old = 1;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keywordflow">return</span> -<a class="code" href="group__mlx90632___a_p_i.html#ga2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div>
<div class="ttc" id="group__mlx90632___a_p_i_html_ga2d1678d5a7cc8ce499643f3b8957def4"><div class="ttname"><a href="group__mlx90632___a_p_i.html#ga2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a></div><div class="ttdeci">#define EINVAL</div><div class="ttdoc">From linux errno.h. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00048">mlx90632.h:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaefd8592cf3141fc3c743518f5c17922b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double mlx90632_get_emissivity </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read value of emissivity. </p>

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00318">318</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;{</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__mlx90632__private.html#ga550830179421e5b049ab66072426fa4f">emissivity</a> == 0.0)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">return</span> 1.0;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__mlx90632__private.html#ga550830179421e5b049ab66072426fa4f">emissivity</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div>
<div class="ttc" id="group__mlx90632__private_html_ga550830179421e5b049ab66072426fa4f"><div class="ttname"><a href="group__mlx90632__private.html#ga550830179421e5b049ab66072426fa4f">emissivity</a></div><div class="ttdeci">static double emissivity</div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8c_source.html#l00312">mlx90632.c:312</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga4959a8751a1c201cbb2b6bcf6ee07df8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t mlx90632_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize MLX90632 driver and confirm EEPROM version. </p>
<p>EEPROM version is important to match sensor EEPROM content and calculations. This is why this function checks for correct EEPROM version before it does checksum validation of the EEPROM content.</p>
<dl class="section note"><dt>Note</dt><dd>EEPROM version can have swapped high and low bytes due to CPU or I2C. Please confirm that i2c read (16bit) is functioning as expected.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successfully initialized MLX90632 driver </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Something went wrong. Consult errno.h for more details. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00351">351</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;{</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    int32_t ret;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    uint16_t eeprom_version, reg_status;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    ret = <a class="code" href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a>(<a class="code" href="group__mlx90632___a_p_i.html#ga2f304c71377af11eba7268b2e04685b1">MLX90632_EE_VERSION</a>, &amp;eeprom_version);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">if</span> ((eeprom_version &amp; 0x00FF) != <a class="code" href="group__mlx90632___a_p_i.html#gacd208fac9b8ad190e1dee6e28ebf4baa">MLX90632_DSPv5</a>)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="comment">// this here can fail because of big/little endian of cpu/i2c</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">return</span> -<a class="code" href="group__mlx90632___a_p_i.html#gad581c46fdd4dee9419f60eaff40415e7">EPROTONOSUPPORT</a>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    ret = <a class="code" href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a>(<a class="code" href="group__mlx90632___a_p_i.html#gaa71b864001998adc7b1ced30c0026fb4">MLX90632_REG_STATUS</a>, &amp;reg_status);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// Prepare a clean start with setting NEW_DATA to 0</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    ret = <a class="code" href="group__mlx90632___a_p_i__depends.html#gadd4725baf2ab7fbdce469ded4f9a88b1">mlx90632_i2c_write</a>(<a class="code" href="group__mlx90632___a_p_i.html#gaa71b864001998adc7b1ced30c0026fb4">MLX90632_REG_STATUS</a>, reg_status &amp; ~(<a class="code" href="group__mlx90632___a_p_i.html#gab4e367bc4e242eb5a6e6d259a354d442">MLX90632_STAT_DATA_RDY</a>));</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div>
<div class="ttc" id="group__mlx90632___a_p_i_html_ga2f304c71377af11eba7268b2e04685b1"><div class="ttname"><a href="group__mlx90632___a_p_i.html#ga2f304c71377af11eba7268b2e04685b1">MLX90632_EE_VERSION</a></div><div class="ttdeci">#define MLX90632_EE_VERSION</div><div class="ttdoc">EEPROM version reg - assumed 0x101. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00079">mlx90632.h:79</a></div></div>
<div class="ttc" id="group__mlx90632___a_p_i__depends_html_ga26c849ca0c3be8cc2a41e5178e92c1e4"><div class="ttname"><a href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a></div><div class="ttdeci">int32_t mlx90632_i2c_read(int16_t register_address, uint16_t *value)</div><div class="ttdoc">Read the register_address value from the mlx90632. </div></div>
<div class="ttc" id="group__mlx90632___a_p_i_html_gad581c46fdd4dee9419f60eaff40415e7"><div class="ttname"><a href="group__mlx90632___a_p_i.html#gad581c46fdd4dee9419f60eaff40415e7">EPROTONOSUPPORT</a></div><div class="ttdeci">#define EPROTONOSUPPORT</div><div class="ttdoc">From linux errno.h. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00051">mlx90632.h:51</a></div></div>
<div class="ttc" id="group__mlx90632___a_p_i__depends_html_gadd4725baf2ab7fbdce469ded4f9a88b1"><div class="ttname"><a href="group__mlx90632___a_p_i__depends.html#gadd4725baf2ab7fbdce469ded4f9a88b1">mlx90632_i2c_write</a></div><div class="ttdeci">int32_t mlx90632_i2c_write(int16_t register_address, uint16_t value)</div><div class="ttdoc">Write value to register_address of the mlx90632. </div></div>
<div class="ttc" id="group__mlx90632___a_p_i_html_gaa71b864001998adc7b1ced30c0026fb4"><div class="ttname"><a href="group__mlx90632___a_p_i.html#gaa71b864001998adc7b1ced30c0026fb4">MLX90632_REG_STATUS</a></div><div class="ttdeci">#define MLX90632_REG_STATUS</div><div class="ttdoc">Device status register. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00121">mlx90632.h:121</a></div></div>
<div class="ttc" id="group__mlx90632___a_p_i_html_gab4e367bc4e242eb5a6e6d259a354d442"><div class="ttname"><a href="group__mlx90632___a_p_i.html#gab4e367bc4e242eb5a6e6d259a354d442">MLX90632_STAT_DATA_RDY</a></div><div class="ttdeci">#define MLX90632_STAT_DATA_RDY</div><div class="ttdoc">Data ready indicator. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00126">mlx90632.h:126</a></div></div>
<div class="ttc" id="group__mlx90632___a_p_i_html_gacd208fac9b8ad190e1dee6e28ebf4baa"><div class="ttname"><a href="group__mlx90632___a_p_i.html#gacd208fac9b8ad190e1dee6e28ebf4baa">MLX90632_DSPv5</a></div><div class="ttdeci">#define MLX90632_DSPv5</div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00137">mlx90632.h:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga06bcec82dba1e3d947dbca8203ca7e43"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double mlx90632_preprocess_temp_ambient </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>ambient_new_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>ambient_old_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>Gb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculation of raw ambient output. </p>
<p>Preprocessing of the raw ambient value</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ambient_new_raw</td><td>ambient temperature from <a class="el" href="group__mlx90632___a_p_i.html#ga8c4bf643c0a7d5b4318a01c391e58a44">MLX90632_RAM_3</a>. The meas_num 1 or 2 is determined by value in <a class="el" href="group__mlx90632___a_p_i.html#ga0a7a304c4dfb097c4e5dfd410916abc3">MLX90632_STAT_CYCLE_POS</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ambient_old_raw</td><td>ambient temperature from <a class="el" href="group__mlx90632___a_p_i.html#ga8c4bf643c0a7d5b4318a01c391e58a44">MLX90632_RAM_3</a>. The meas_num 1 or 2 is determined by value not in <a class="el" href="group__mlx90632___a_p_i.html#ga0a7a304c4dfb097c4e5dfd410916abc3">MLX90632_STAT_CYCLE_POS</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Gb</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#ga3fb045ecd6369440678041a640220336">MLX90632_EE_Gb</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Calculated ambient raw output </dd></dl>

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00229">229</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;{</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordtype">double</span> VR_Ta, kGb;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    kGb = ((double)Gb) / 1024.0;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    VR_Ta = ambient_old_raw + kGb * (ambient_new_raw / (<a class="code" href="group__mlx90632___a_p_i.html#gaee308c18a064ee52bcc97f66b7d2f742">MLX90632_REF_3</a>));</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> ((ambient_new_raw / (<a class="code" href="group__mlx90632___a_p_i.html#gaee308c18a064ee52bcc97f66b7d2f742">MLX90632_REF_3</a>)) / VR_Ta) * 524288.0;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
<div class="ttc" id="group__mlx90632___a_p_i_html_gaee308c18a064ee52bcc97f66b7d2f742"><div class="ttname"><a href="group__mlx90632___a_p_i.html#gaee308c18a064ee52bcc97f66b7d2f742">MLX90632_REF_3</a></div><div class="ttdeci">#define MLX90632_REF_3</div><div class="ttdoc">ResCtrlRef value of Channel 3. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00144">mlx90632.h:144</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaca7c5dd5a81d4e98de37195023bec370"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double mlx90632_preprocess_temp_object </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>object_new_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>object_old_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>ambient_new_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>ambient_old_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>Ka</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculation of raw object output. </p>
<p>Preprocessing of the raw object value</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">object_new_raw</td><td>object temperature from <a class="el" href="group__mlx90632___a_p_i.html#gae0bbb4692850f4c858528c4e0795e2dc">MLX90632_RAM_1</a> or <a class="el" href="group__mlx90632___a_p_i.html#ga57fa40f154147d582b78c13f8dbd0fa6">MLX90632_RAM_2</a>. The meas_number 1 or 2 is determined by value in <a class="el" href="group__mlx90632___a_p_i.html#ga0a7a304c4dfb097c4e5dfd410916abc3">MLX90632_STAT_CYCLE_POS</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">object_old_raw</td><td>object temperature from <a class="el" href="group__mlx90632___a_p_i.html#gae0bbb4692850f4c858528c4e0795e2dc">MLX90632_RAM_1</a> or <a class="el" href="group__mlx90632___a_p_i.html#ga57fa40f154147d582b78c13f8dbd0fa6">MLX90632_RAM_2</a>. The meas_number 1 or 2 is determined by value not in <a class="el" href="group__mlx90632___a_p_i.html#ga0a7a304c4dfb097c4e5dfd410916abc3">MLX90632_STAT_CYCLE_POS</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ambient_new_raw</td><td>ambient temperature from <a class="el" href="group__mlx90632___a_p_i.html#ga8c4bf643c0a7d5b4318a01c391e58a44">MLX90632_RAM_3</a>. The meas_number 1 or 2 is determined by value in <a class="el" href="group__mlx90632___a_p_i.html#ga0a7a304c4dfb097c4e5dfd410916abc3">MLX90632_STAT_CYCLE_POS</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ambient_old_raw</td><td>ambient temperature from <a class="el" href="group__mlx90632___a_p_i.html#ga8c4bf643c0a7d5b4318a01c391e58a44">MLX90632_RAM_3</a>. The meas_number 1 or 2 is determined by value not in <a class="el" href="group__mlx90632___a_p_i.html#ga0a7a304c4dfb097c4e5dfd410916abc3">MLX90632_STAT_CYCLE_POS</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Ka</td><td>Register value on <a class="el" href="group__mlx90632___a_p_i.html#gaa4e4a8bf0e751cf486e3b1ed9ccb7feb">MLX90632_EE_Ka</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Calculated object raw output </dd></dl>

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00239">239</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordtype">double</span> VR_IR, kKa;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    kKa = ((double)Ka) / 1024.0;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    VR_IR = ambient_old_raw + kKa * (ambient_new_raw / (<a class="code" href="group__mlx90632___a_p_i.html#gaee308c18a064ee52bcc97f66b7d2f742">MLX90632_REF_3</a>));</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">return</span> ((((object_new_raw + object_old_raw) / 2) / (<a class="code" href="group__mlx90632___a_p_i.html#gad4bae5afc75e99003c2b453cbe3d4b82">MLX90632_REF_12</a>)) / VR_IR) * 524288.0;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div>
<div class="ttc" id="group__mlx90632___a_p_i_html_gaee308c18a064ee52bcc97f66b7d2f742"><div class="ttname"><a href="group__mlx90632___a_p_i.html#gaee308c18a064ee52bcc97f66b7d2f742">MLX90632_REF_3</a></div><div class="ttdeci">#define MLX90632_REF_3</div><div class="ttdoc">ResCtrlRef value of Channel 3. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00144">mlx90632.h:144</a></div></div>
<div class="ttc" id="group__mlx90632___a_p_i_html_gad4bae5afc75e99003c2b453cbe3d4b82"><div class="ttname"><a href="group__mlx90632___a_p_i.html#gad4bae5afc75e99003c2b453cbe3d4b82">MLX90632_REF_12</a></div><div class="ttdeci">#define MLX90632_REF_12</div><div class="ttdoc">ResCtrlRef value of Channel 1 or Channel 2. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00143">mlx90632.h:143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga0d807560e3efcd83e1a12b569a6876b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__mlx90632__private.html#ga10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> int32_t mlx90632_read_temp_ambient_raw </td>
          <td>(</td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>ambient_new_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>ambient_old_raw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read ambient raw old and new values based on <a class="el" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a> return value. </p>
<p>Two i2c_reads are needed to obtain necessary raw ambient values from the sensor, as they are then preprocessed before going to calculation functions. Because one value is newer than other (see <a class="el" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a>) this function provides dynamics based on return value of the <a class="el" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">*ambient_new_raw</td><td>Pointer to memory location where new ambient value from sensor is stored </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*ambient_old_raw</td><td>Pointer to memory location where old ambient value from sensor is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successfully read both values </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Something went wrong. Check errno.h for more details. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00139">139</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    int32_t ret;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    uint16_t read_tmp;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    ret = <a class="code" href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a>(<a class="code" href="group__mlx90632___a_p_i.html#ga8c4bf643c0a7d5b4318a01c391e58a44">MLX90632_RAM_3</a>(1), &amp;read_tmp);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    *ambient_new_raw = (int16_t)read_tmp;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    ret = <a class="code" href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a>(<a class="code" href="group__mlx90632___a_p_i.html#ga8c4bf643c0a7d5b4318a01c391e58a44">MLX90632_RAM_3</a>(2), &amp;read_tmp);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    *ambient_old_raw = (int16_t)read_tmp;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div>
<div class="ttc" id="group__mlx90632___a_p_i_html_ga8c4bf643c0a7d5b4318a01c391e58a44"><div class="ttname"><a href="group__mlx90632___a_p_i.html#ga8c4bf643c0a7d5b4318a01c391e58a44">MLX90632_RAM_3</a></div><div class="ttdeci">#define MLX90632_RAM_3(meas_num)</div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00131">mlx90632.h:131</a></div></div>
<div class="ttc" id="group__mlx90632___a_p_i__depends_html_ga26c849ca0c3be8cc2a41e5178e92c1e4"><div class="ttname"><a href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a></div><div class="ttdeci">int32_t mlx90632_i2c_read(int16_t register_address, uint16_t *value)</div><div class="ttdoc">Read the register_address value from the mlx90632. </div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga1d1dd4ea2aae3fe570e783fb04296590"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__mlx90632__private.html#ga10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> int32_t mlx90632_read_temp_object_raw </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>start_measurement_ret</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>object_new_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>object_old_raw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read object raw old and new values based on <a class="el" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a> return value. </p>
<p>Four i2c_reads are needed to obtain necessary raw object values from the sensor. These values are grouped per new and old and then averaged before return of the function. After that they are then preprocessed before going to calculation functions. Because one value is newer than other (see <a class="el" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a>) this function provides dynamics based on return value of the <a class="el" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">start_measurement_ret</td><td>Return value of <a class="el" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*object_new_raw</td><td>Pointer to memory location where average of new object values from sensor is stored </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*object_old_raw</td><td>Pointer to memory location where average of old object values from sensor is stored</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successfully read both values </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Something went wrong. Check errno.h for more details. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00171">171</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    int32_t ret;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    uint16_t read_tmp;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    int16_t read;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    uint8_t channel, channel_old;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    ret = <a class="code" href="group__mlx90632__private.html#ga392d63bee1a87de09141a37ac73aad6a">mlx90632_channel_new_select</a>(start_measurement_ret, &amp;channel, &amp;channel_old);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (ret != 0)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">return</span> -<a class="code" href="group__mlx90632___a_p_i.html#ga2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    ret = <a class="code" href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a>(<a class="code" href="group__mlx90632___a_p_i.html#ga57fa40f154147d582b78c13f8dbd0fa6">MLX90632_RAM_2</a>(channel), &amp;read_tmp);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    read = (int16_t)read_tmp;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    ret = <a class="code" href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a>(<a class="code" href="group__mlx90632___a_p_i.html#gae0bbb4692850f4c858528c4e0795e2dc">MLX90632_RAM_1</a>(channel), &amp;read_tmp);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    *object_new_raw = (read + (int16_t)read_tmp) / 2;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    ret = <a class="code" href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a>(<a class="code" href="group__mlx90632___a_p_i.html#ga57fa40f154147d582b78c13f8dbd0fa6">MLX90632_RAM_2</a>(channel_old), &amp;read_tmp);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    read = (int16_t)read_tmp;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    ret = <a class="code" href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a>(<a class="code" href="group__mlx90632___a_p_i.html#gae0bbb4692850f4c858528c4e0795e2dc">MLX90632_RAM_1</a>(channel_old), &amp;read_tmp);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    *object_old_raw = (read + (int16_t)read_tmp) / 2;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div>
<div class="ttc" id="group__mlx90632___a_p_i_html_gae0bbb4692850f4c858528c4e0795e2dc"><div class="ttname"><a href="group__mlx90632___a_p_i.html#gae0bbb4692850f4c858528c4e0795e2dc">MLX90632_RAM_1</a></div><div class="ttdeci">#define MLX90632_RAM_1(meas_num)</div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00129">mlx90632.h:129</a></div></div>
<div class="ttc" id="group__mlx90632___a_p_i__depends_html_ga26c849ca0c3be8cc2a41e5178e92c1e4"><div class="ttname"><a href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a></div><div class="ttdeci">int32_t mlx90632_i2c_read(int16_t register_address, uint16_t *value)</div><div class="ttdoc">Read the register_address value from the mlx90632. </div></div>
<div class="ttc" id="group__mlx90632___a_p_i_html_ga57fa40f154147d582b78c13f8dbd0fa6"><div class="ttname"><a href="group__mlx90632___a_p_i.html#ga57fa40f154147d582b78c13f8dbd0fa6">MLX90632_RAM_2</a></div><div class="ttdeci">#define MLX90632_RAM_2(meas_num)</div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00130">mlx90632.h:130</a></div></div>
<div class="ttc" id="group__mlx90632__private_html_ga392d63bee1a87de09141a37ac73aad6a"><div class="ttname"><a href="group__mlx90632__private.html#ga392d63bee1a87de09141a37ac73aad6a">mlx90632_channel_new_select</a></div><div class="ttdeci">static int32_t mlx90632_channel_new_select(int32_t ret, uint8_t *channel_new, uint8_t *channel_old)</div><div class="ttdoc">Based on mlx90632_start_measurement return value fill channel_new and channel_old variables with prop...</div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8c_source.html#l00106">mlx90632.c:106</a></div></div>
<div class="ttc" id="group__mlx90632___a_p_i_html_ga2d1678d5a7cc8ce499643f3b8957def4"><div class="ttname"><a href="group__mlx90632___a_p_i.html#ga2d1678d5a7cc8ce499643f3b8957def4">EINVAL</a></div><div class="ttdeci">#define EINVAL</div><div class="ttdoc">From linux errno.h. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00048">mlx90632.h:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga36c61b9d5417e77e415500ab45055053"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t mlx90632_read_temp_raw </td>
          <td>(</td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>ambient_new_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>ambient_old_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>object_new_raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t *&#160;</td>
          <td class="paramname"><em>object_old_raw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read raw ambient and object temperature. </p>
<p>Trigger and read raw ambient and object temperatures. This values still need to be pre-processed via <a class="el" href="group__mlx90632___a_p_i.html#ga06bcec82dba1e3d947dbca8203ca7e43">mlx90632_preprocess_temp_ambient</a> and <a class="el" href="group__mlx90632___a_p_i.html#gaca7c5dd5a81d4e98de37195023bec370">mlx90632_preprocess_temp_object</a> functions and then processed via <a class="el" href="group__mlx90632___a_p_i.html#ga7939b85a05b6d8899c0d793b37388a0d">mlx90632_calc_temp_ambient</a> and <a class="el" href="group__mlx90632___a_p_i.html#gadaa9b8a1b74083aeee178f313fbad260">mlx90632_calc_temp_object</a> to retrieve values in milliCelsius</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ambient_new_raw</td><td>Pointer to where new raw ambient temperature is written </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">object_new_raw</td><td>Pointer to where new raw object temperature is written </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ambient_old_raw</td><td>Pointer to where old raw ambient temperature is written </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">object_old_raw</td><td>Pointer to where old raw object temperature is written</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successfully read both temperatures </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Something went wrong. Check errno.h for more details </td></tr>
  </table>
  </dd>
</dl>
<p>Read new and old <b>ambient</b> values from sensor</p>
<p>Read new and old <b>object</b> values from sensor </p>

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00207">207</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;{</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    int32_t ret, start_measurement_ret;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// trigger and wait for measurement to complete</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    start_measurement_ret = <a class="code" href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a>();</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span> (start_measurement_ret &lt; 0)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">return</span> start_measurement_ret;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    ret = <a class="code" href="group__mlx90632__private.html#ga0d807560e3efcd83e1a12b569a6876b0">mlx90632_read_temp_ambient_raw</a>(ambient_new_raw, ambient_old_raw);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    ret = <a class="code" href="group__mlx90632__private.html#ga1d1dd4ea2aae3fe570e783fb04296590">mlx90632_read_temp_object_raw</a>(start_measurement_ret, object_new_raw, object_old_raw);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="ttc" id="group__mlx90632__private_html_ga1c6a7153997c482936180a22a3252d5c"><div class="ttname"><a href="group__mlx90632__private.html#ga1c6a7153997c482936180a22a3252d5c">mlx90632_start_measurement</a></div><div class="ttdeci">STATIC int mlx90632_start_measurement(void)</div><div class="ttdoc">Trigger start measurement for mlx90632. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8c_source.html#l00056">mlx90632.c:56</a></div></div>
<div class="ttc" id="group__mlx90632__private_html_ga0d807560e3efcd83e1a12b569a6876b0"><div class="ttname"><a href="group__mlx90632__private.html#ga0d807560e3efcd83e1a12b569a6876b0">mlx90632_read_temp_ambient_raw</a></div><div class="ttdeci">STATIC int32_t mlx90632_read_temp_ambient_raw(int16_t *ambient_new_raw, int16_t *ambient_old_raw)</div><div class="ttdoc">Read ambient raw old and new values based on mlx90632_start_measurement return value. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8c_source.html#l00139">mlx90632.c:139</a></div></div>
<div class="ttc" id="group__mlx90632__private_html_ga1d1dd4ea2aae3fe570e783fb04296590"><div class="ttname"><a href="group__mlx90632__private.html#ga1d1dd4ea2aae3fe570e783fb04296590">mlx90632_read_temp_object_raw</a></div><div class="ttdeci">STATIC int32_t mlx90632_read_temp_object_raw(int32_t start_measurement_ret, int16_t *object_new_raw, int16_t *object_old_raw)</div><div class="ttdoc">Read object raw old and new values based on mlx90632_start_measurement return value. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8c_source.html#l00171">mlx90632.c:171</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga6990b56cba8dd4e6f9508ae075b30be0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mlx90632_set_emissivity </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set emissivity which is retained in single variable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>Value provided by user of object emissivity. Defaults to 1.0 and cannot be 0.0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>This is not suitable for multi-process calculations as we do not use instances </dd></dl>

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00313">313</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;{</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="group__mlx90632__private.html#ga550830179421e5b049ab66072426fa4f">emissivity</a> = value;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;}</div>
<div class="ttc" id="group__mlx90632__private_html_ga550830179421e5b049ab66072426fa4f"><div class="ttname"><a href="group__mlx90632__private.html#ga550830179421e5b049ab66072426fa4f">emissivity</a></div><div class="ttdeci">static double emissivity</div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8c_source.html#l00312">mlx90632.c:312</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga1c6a7153997c482936180a22a3252d5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__mlx90632__private.html#ga10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> int mlx90632_start_measurement </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Trigger start measurement for mlx90632. </p>
<p>Trigger measurement cycle and wait for data to be ready. It does not read anything, just triggers and completes.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&lt;0</td><td>Something failed. Check errno.h for more information </td></tr>
    <tr><td class="paramname">&gt;=0</td><td>Channel position where new (recently updated) measurement can be found</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function is using usleep so it is blocking! </dd></dl>

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00056">56</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordtype">int</span> ret, tries = 100;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    uint16_t reg_status;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    ret = <a class="code" href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a>(<a class="code" href="group__mlx90632___a_p_i.html#gaa71b864001998adc7b1ced30c0026fb4">MLX90632_REG_STATUS</a>, &amp;reg_status);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    ret = <a class="code" href="group__mlx90632___a_p_i__depends.html#gadd4725baf2ab7fbdce469ded4f9a88b1">mlx90632_i2c_write</a>(<a class="code" href="group__mlx90632___a_p_i.html#gaa71b864001998adc7b1ced30c0026fb4">MLX90632_REG_STATUS</a>, reg_status &amp; (~<a class="code" href="group__mlx90632___a_p_i.html#gab4e367bc4e242eb5a6e6d259a354d442">MLX90632_STAT_DATA_RDY</a>));</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">while</span> (tries-- &gt; 0)</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        ret = <a class="code" href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a>(<a class="code" href="group__mlx90632___a_p_i.html#gaa71b864001998adc7b1ced30c0026fb4">MLX90632_REG_STATUS</a>, &amp;reg_status);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordflow">if</span> (reg_status &amp; <a class="code" href="group__mlx90632___a_p_i.html#gab4e367bc4e242eb5a6e6d259a354d442">MLX90632_STAT_DATA_RDY</a>)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="comment">/* minimum wait time to complete measurement</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">         * should be calculated according to refresh rate</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">         * atm 10ms - 11ms</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="group__mlx90632___a_p_i__depends.html#gaf8d28bb8dc5ad7e51324b607243fc182">usleep</a>(10000, 11000);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">if</span> (tries &lt; 0)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="comment">// data not ready</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">return</span> -<a class="code" href="group__mlx90632___a_p_i.html#ga597718e59a8fc9c4d4ab63f5a34e28b1">ETIMEDOUT</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">return</span> (reg_status &amp; <a class="code" href="group__mlx90632___a_p_i.html#ga0a7a304c4dfb097c4e5dfd410916abc3">MLX90632_STAT_CYCLE_POS</a>) &gt;&gt; 2;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;}</div>
<div class="ttc" id="group__mlx90632___a_p_i__depends_html_ga26c849ca0c3be8cc2a41e5178e92c1e4"><div class="ttname"><a href="group__mlx90632___a_p_i__depends.html#ga26c849ca0c3be8cc2a41e5178e92c1e4">mlx90632_i2c_read</a></div><div class="ttdeci">int32_t mlx90632_i2c_read(int16_t register_address, uint16_t *value)</div><div class="ttdoc">Read the register_address value from the mlx90632. </div></div>
<div class="ttc" id="group__mlx90632___a_p_i_html_ga0a7a304c4dfb097c4e5dfd410916abc3"><div class="ttname"><a href="group__mlx90632___a_p_i.html#ga0a7a304c4dfb097c4e5dfd410916abc3">MLX90632_STAT_CYCLE_POS</a></div><div class="ttdeci">#define MLX90632_STAT_CYCLE_POS</div><div class="ttdoc">Data position in measurement table. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00125">mlx90632.h:125</a></div></div>
<div class="ttc" id="group__mlx90632___a_p_i__depends_html_gadd4725baf2ab7fbdce469ded4f9a88b1"><div class="ttname"><a href="group__mlx90632___a_p_i__depends.html#gadd4725baf2ab7fbdce469ded4f9a88b1">mlx90632_i2c_write</a></div><div class="ttdeci">int32_t mlx90632_i2c_write(int16_t register_address, uint16_t value)</div><div class="ttdoc">Write value to register_address of the mlx90632. </div></div>
<div class="ttc" id="group__mlx90632___a_p_i_html_gaa71b864001998adc7b1ced30c0026fb4"><div class="ttname"><a href="group__mlx90632___a_p_i.html#gaa71b864001998adc7b1ced30c0026fb4">MLX90632_REG_STATUS</a></div><div class="ttdeci">#define MLX90632_REG_STATUS</div><div class="ttdoc">Device status register. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00121">mlx90632.h:121</a></div></div>
<div class="ttc" id="group__mlx90632___a_p_i_html_gab4e367bc4e242eb5a6e6d259a354d442"><div class="ttname"><a href="group__mlx90632___a_p_i.html#gab4e367bc4e242eb5a6e6d259a354d442">MLX90632_STAT_DATA_RDY</a></div><div class="ttdeci">#define MLX90632_STAT_DATA_RDY</div><div class="ttdoc">Data ready indicator. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00126">mlx90632.h:126</a></div></div>
<div class="ttc" id="group__mlx90632___a_p_i__depends_html_gaf8d28bb8dc5ad7e51324b607243fc182"><div class="ttname"><a href="group__mlx90632___a_p_i__depends.html#gaf8d28bb8dc5ad7e51324b607243fc182">usleep</a></div><div class="ttdeci">void usleep(int min_range, int max_range)</div><div class="ttdoc">Blocking function for sleeping in microseconds. </div></div>
<div class="ttc" id="group__mlx90632___a_p_i_html_ga597718e59a8fc9c4d4ab63f5a34e28b1"><div class="ttname"><a href="group__mlx90632___a_p_i.html#ga597718e59a8fc9c4d4ab63f5a34e28b1">ETIMEDOUT</a></div><div class="ttdeci">#define ETIMEDOUT</div><div class="ttdoc">From linux errno.h. </div><div class="ttdef"><b>Definition:</b> <a href="mlx90632_8h_source.html#l00045">mlx90632.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga550830179421e5b049ab66072426fa4f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double emissivity = 0.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00312">312</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga4c40d3f9fa0642ccff11f4699f243180"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char mlx90632version[] = { <a class="el" href="group__mlx90632__private.html#ga1c6d5de492ac61ad29aec7aa9a436bbf">VERSION</a> }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mlx90632_8c_source.html#l00041">41</a> of file <a class="el" href="mlx90632_8c_source.html">mlx90632.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
    <img class="footer" src="doxygen/images/melexis-logo.png" alt="Melexis N.V," height="25px" hspace="10"/>
	&copy; Copyright 2015 Melexis N.V. ---
    Generated on Tue Apr 23 2019 12:57:08 for MLX90632 Driver Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
